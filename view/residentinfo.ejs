<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/public/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap"
        rel="stylesheet">

    <script defer src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script defer src="https://cdn.datatables.net/2.1.3/js/dataTables.js"></script>
    <script defer src="https://cdn.datatables.net/2.1.3/js/dataTables.bootstrap5.js"></script>
    <script defer src="/public/js/script.js"></script>
    <script src="/public/js/sidenav.js"></script>
</head>

<body>
    <div class="topbar">
        <div class="logoname d-flex align-items-center">
            <div class="menu-toggle" id="menu-toggle">
                <i class="fas fa-bars"></i>
            </div>
            <a href="#" class="logo">
                <img src="/public/images/brgylogo.png" alt="">
            </a>
            <h3 class="ms-2">Brgy. Bilog Information System</h3>
        </div>
        <div class="user-role">
            <i class="fa-solid fa-user"></i> Admin
        </div>
    </div>
    
    <div class="layout">
        <div class="sidenavbar" id="sidebar">
            <ul class="menu-links sidebar-nav p-0">
        
                <li class="sidebar-item"><a href="/dashboard" class="li" data-bs-toggle="tooltip" title="Dashboard"><i
                            class="fa-solid fa-house"></i><span class="nav-item">Dashboard</span></a></li>
                <li class="sidebar-item" data-bs-toggle="tooltip" title="Resident Information"><a
                        href="/residentData/residentinfo" class="li"><i class="fa-solid fa-person"></i><span
                            class="nav-item">Resident Information</span></a>
                </li>
                <li class="sidebar-item" data-bs-toggle="tooltip" title="Certificates">
                    <a href="#" class="li sidebar-link collapsed has-dropdown" data-bs-toggle="collapse" data-bs-target="#cert"
                        aria-expanded="false" aria-controls="cert">
                        <i class="fa-solid fa-certificate"></i>
                        <span class="nav-item">Certificates</span>
                    </a>
                    <ul id="cert" class="sidebar-dropdown list-unstyled collapse">
                        <li class="sidebar-item">
                            <a href="" class="sidebar-link">Brgy. Certification</a>
                        </li>
                        <li class="sidebar-item">
                            <a href="" class="sidebar-link">Brgy. Clearance</a>
                        </li>
                        <li class="sidebar-item">
                            <a href="" class="sidebar-link">Brgy. Clearance for Securing Fencing Permit</a>
                        </li>
                        <li class="sidebar-item">
                            <a href="" class="sidebar-link">Brgy. Indigency</a>
                        </li>
                        <li class="sidebar-item">
                            <a href="" class="sidebar-link">Brgy. Residency Certification</a>
                        </li>
                        <li class="sidebar-item">
                            <a href="" class="sidebar-link">Brgy. Working Clearance</a>
                        </li>
                        <li class="sidebar-item">
                            <a href="" class="sidebar-link">Building Permit</a>
                        </li>
                        <li class="sidebar-item">
                            <a href="" class="sidebar-link">Certificate of Responsibility and Accountability</a>
                        </li>
                        <li class="sidebar-item">
                            <a href="" class="sidebar-link">First-time Jobseeker</a>
                        </li>
                    </ul>
                </li>
                <li class="sidebar-item"><a href="/blotterRoute/blotterRecords" class="li" data-bs-toggle="tooltip"
                        title="Blotter Records"><i class="fa-solid fa-flag"></i><span class="nav-item">Blotter
                            Records</span></a></li>
                <li class="sidebar-item"><a href="/settings" class="li"><i class="fa-solid fa-gear" data-bs-toggle="tooltip"
                            title="Settings"></i><span class="nav-item">Settings</span></a></li>
                <li class="sidebar-item"><a href="/users/logout" class="logout li" data-bs-toggle="tooltip" title="Logout"><i
                            class="fa-solid fa-right-from-bracket"></i><span class="nav-item">Log out</span></a></li>
            </ul>
        </div>
    
    <div class="container">
        <div class="section-name">
            <h3><i class="fa-solid fa-person"></i> Resident Information</h3>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="table-responsive">
                    <div class="table table-striped">
                        <div class="table-content">
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <button class="btn me-md-2 add-btn" type="button" style="background: #2b2d42;">
                                    <a href="" data-bs-toggle="modal" data-bs-target="#addRes">Add Resident</a>
                                </button>
                            </div>

                            <table id="example" class="resident-table table table-striped text-center" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Age</th>
                                        <th>Date of Birth</th>
                                        <th>Place of Birth</th>
                                        <th>Years of Residency</th>
                                        <th>Civil Status</th>
                                        <th>Sex</th>
                                        <th>Occupation</th>
                                        <th>Education</th>
                                        <th>Company Name</th>
                                        <th>Voter Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                            
                                <tbody>
                                    <% list.forEach(function(resident) { %>
                                    <tr>
                                        <td><%= resident.fname %> <%= resident.lname %></td>
                                        <td><%= resident.age %></td>
                                        <td><%= resident.dob.toISOString().split('T')[0] %></td> <!-- Format date -->
                                        <td><%= resident.placeOfBirth %></td>
                                        <td><%= resident.yearsOfResidency %></td>
                                        <td><%= resident.civilStatus %></td>
                                        <td><%= resident.sex %></td>
                                        <td><%= resident.occupation %></td>
                                        <td><%= resident.education %></td>
                                        <td><%= resident.companyName %></td>
                                        <td><%= resident.voterStatus %></td>
                                        <td>
                                            <!-- Action button (Edit button) -->
                                            <a href="/edit/<%= resident._id %>" class="text-warning" title="Edit" data-bs-toggle="modal"
                                                data-bs-target="#updateRes">
                                                <i class="fas fa-edit"></i>
                                            </a>

                                            <a href="/residentData/profile/<%= resident._id %>" class="text-info" title="See Details">
                                                <i class="fas fa-file-pdf"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    <% }) %>
                                </tbody>

                            
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>  

    <div class="col-lg-3 card-table">
        <div class="row mb-3">
            <div class="col">
                <a href="your-link-here" class="text-decoration-none">
                    <div class="card text-bg-primary mb-3">
                        <div class="card-body">
                            <h5>Population</h5>
                            <h2>
                                <%= list.length %>
                            </h2>
                        </div>
                    </div>
                </a>

            </div>
        </div>
        <div class="row mb-3">
            <div class="col">
                <a href="your-link-here" class="text-decoration-none">
                    <div class="card text-bg-danger mb-3">
                        <div class="card-body">
                            <h5>Male</h5>
                            <h2>
                                <%= list.filter(resident=> resident.sex === 'Male').length %>
                            </h2>
                        </div>
                    </div>
                </a>           
            </div>
        </div>

        <div class="row mb-3">
            <div class="col">
                <a href="your-link-here" class="text-decoration-none">
                    <div class="card text-bg-success mb-3">
                        <div class="card-body">
                            <h5>Female</h5>
                            <h2>
                                <%= list.filter(resident=> resident.sex === 'Female').length %>
                            </h2>
                        </div>
                    </div>
                </a> 
            </div>
        </div>
    </div>
        
    </div>

    <!--Add Resident Modal -->
    <div class="modal fade" id="addRes">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Add Resident Information</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close"></button>
                </div>
    
                <div class="modal-body">
                    <form action="/residentData/addResident" method="post" id="addForm">
                        <div class="row">
                            <div class="col-md-4 mb-4">
                                <label for="firstName" class="form-label">First Name</label>
                                <input type="text" class="form-control" id="firstName" name="firstName"
                                    placeholder="Enter first name">
                            </div>
                            <div class="col-md-4 mb-4">
                                <label for="lastName" class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="lastName" name="lastName"
                                    placeholder="Enter last name">
                            </div>
                            <div class="col-md-2 mb-4">
                                <label for="suffix" class="form-label">Suffix</label>
                                <input type="text" class="form-control" id="suffix" name="suffix" placeholder="(Suffix, eg., Jr, I, II, III)">
                            </div>
                            <div class="col-md-2 mb-4">
                                <label for="age" class="form-label">Age</label>
                                <input type="number" class="form-control" id="age" name="age" placeholder="Enter age">
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-md-3 mb-4">
                                <label for="dob" class="form-label">Date of Birth</label>
                                <input type="date" class="form-control" id="dob" name="dob">
                            </div>
    
                            <div class="col-md-3 mb-4">
                                <label for="placeOfBirth" class="form-label">Place of Birth</label>
                                <input type="text" class="form-control" id="placeOfBirth" name="placeOfBirth"
                                    placeholder="Enter place of birth">
                            </div>
                            <div class="col-md-3 mb-4">
                                <label for="religion" class="form-label">Religion</label>
                                <input type="text" class="form-control" id="religion" name="religion"
                                    placeholder="Enter religion.">
                            </div>
                            <div class="col-md-3 mb-4">
                                <label for="yearsOfResidency" class="form-label">Years of Residency</label>
                                <input type="number" class="form-control" id="yearsInBrgy" name="yearsOfResidency"
                                    placeholder="Enter years of residency.">
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-md-3 mb-4">
                                <label for="citizenship" class="form-label">Citizenship</label>
                                <input type="text" class="form-control" id="citizenship" name="citizenship"
                                    placeholder="Enter citizenship.">
                            </div>
                            <div class="col-md-3 mb-4">
                                <label for="civilStatus" class="form-label">Civil Status</label>
                                <select class="form-select" id="civilStatus" name="civilStatus">
                                    <option selected>Choose...</option>
                                    <option value="Single">Single</option>
                                    <option value="Married">Married</option>
                                    <option value="Separated">Separated</option>
                                    <option value="Divorced">Divorced</option>
                                </select>
                            </div>
                            <div class="col-md-3 mb-4">
                                <label for="sex" class="form-label">Sex</label>
                                <select class="form-select" id="sex" name="sex">
                                    <option selected>Choose...</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </div>
                            <div class="col-md-3 mb-4">
                                <label for="occupation" class="form-label">Occupation</label>
                                <input type="text" class="form-control" id="occupation" name="occupation"
                                    placeholder="Enter occupation">
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-md-3 mb-5">
                                <label for="education" class="form-label">Educational Attainment</label>
                                <select class="form-select" id="education" name="education">
                                    <option selected>Choose...</option>
                                    <option value="Elementary">Elementary</option>
                                    <option value="High School">High School</option>
                                    <option value="College">College</option>
                                    <option value="Post Grad">Post Grad</option>
                                    <option value="Vocational">Vocational</option>
                                </select>
                            </div>
                            <div class="col-md-3 mb-5">
                                <label for="companyName" class="form-label">Name of Company</label>
                                <input type="text" class="form-control" id="companyName" name="companyName"
                                    placeholder="Enter the name of company.">
                            </div>
                            <div class="col-md-3 mb-5">
                                <label for="contact" class="form-label">Contact No.</label>
                                <input type="text" class="form-control" id="contact" name="contact"
                                    placeholder="Enter Contact No.">
                            </div>
                            <div class="col-md-3 mb-5">
                                <label for="voterStatus" class="form-label">Voter Status</label>
                                <select class="form-select" id="voterStatus" name="voterStatus">
                                    <option selected>Choose...</option>
                                    <option value="Voter">Voter</option>
                                    <option value="Non-Voter">Non-Voter</option>
                                </select>
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-12 d-flex justify-content-end">
                                <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-danger">Add New Resident</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!-- Edit Resident Modal -->
    <div class="modal fade" id="updateRes">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Edit Resident Information</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <% list.forEach(function(resident) { %>
                        <form action="/residentData/<%= resident._id %>" method="post" id="updateForm">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="firstName" class="form-label">First Name</label>
                                    <input type="text" class="form-control" id="firstName" name="firstName" value="<%= resident.fname %>">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="lastName" class="form-label">Last Name</label>
                                    <input type="text" class="form-control" id="lastName" name="lastName" value="<%= resident.lname %>">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="age" class="form-label">Age</label>
                                    <input type="number" class="form-control" id="age" name="age" value="<%= resident.age %>">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="dob" class="form-label">Date of Birth</label>
                                    <input type="date" class="form-control" id="dob" name="dob" value="<%= resident.dob ? new Date(resident.dob).toISOString().slice(0, 10) : '' %>">
                                </div>
                            
                                <div class="col-md-4 mb-3">
                                    <label for="placeOfBirth" class="form-label">Place of Birth</label>
                                    <input type="text" class="form-control" id="placeOfBirth" name="placeOfBirth"
                                        value="<%= resident.placeOfBirth %>">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="yearsOfResidency" class="form-label">Years of Residency</label>
                                    <input type="number" class="form-control" id="yearsInBrgy" name="yearsOfResidency"
                                        value="<%= resident.yearsOfResidency %>">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="civilStatus" class="form-label">Civil Status</label>
                                    <select class="form-select" id="civilStatus" name="civilStatus">
                                        <option selected value="<%= resident.fname %>">Choose...</option>
                                        <option value="Single" <%= resident.civilStatus === 'Single' ? 'selected' : '' %>>Single</option>
                                        <option value="Married" <%= resident.civilStatus === 'Married' ? 'selected' : '' %>>Married</option>
                                        <option value="Separated" <%= resident.civilStatus === 'Separated' ? 'selected' : '' %>>Separated</option>
                                        <option value="Divorced" <%= resident.civilStatus === 'Divorced' ? 'selected' : '' %>>Divorced</option>
                                    </select>
                            
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="position" class="form-label">Position</label>
                                    <input type="text" class="form-control" id="position" name="position" value="<%= resident.position %>">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="sex" class="form-label">Sex</label>
                                    <select class="form-select" id="sex" name="sex">
                                        <option selected value="<%= resident.fname %>">Choose...</option>
                                        <option value="Male" <%= resident.sex === 'Male' ? 'selected' : '' %>>Male</option>
                                        <option value="Female" <%= resident.sex === 'Female' ? 'selected' : '' %>>Female</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="natureOfwork" class="form-label">Nature of work</label>
                                    <input type="text" class="form-control" id="occupation" name="natureOfwork" value="<%= resident.natureOfwork %>">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="education" class="form-label">Educational Attainment</label>
                                    <select class="form-select" id="education" name="education">
                                        <option selected>Choose...</option>
                                        <option value="Elementary" <%= resident.education === 'Elementary' ? 'selected' : '' %>>Elementary</option>
                                        <option value="High School" <%= resident.education === 'High School' ? 'selected' : '' %>>High School</option>
                                        <option value="College" <%= resident.education === 'College' ? 'selected' : '' %>>College</option>
                                        <option value="Post Grad" <%= resident.education === 'Post Grad' ? 'selected' : '' %>>Post Grad</option>
                                        <option value="Vocational" <%= resident.education === 'Vocational' ? 'selected' : '' %>>Vocational</option>
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="companyName" class="form-label">Name of Company</label>
                                    <input type="text" class="form-control" id="companyName" name="companyName"
                                        value="<%= resident.companyName %>">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="voterStatus" class="form-label">Voter Status</label>
                                    <select class="form-select" id="voterStatus" name="voterStatus" value="<%= resident.voterStatus %>">
                                        <option selected>Choose...</option>
                                        <option value="Voter" <%= resident.voterStatus === 'Voter' ? 'selected' : '' %>>Voter</option>
                                        <option value="Non-Voter" <%= resident.voterStatus === 'Non-Voter' ? 'selected' : '' %>>Non-Voter</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12 d-flex justify-content-end">
                                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                                    <button type="submit" class="btn btn-danger">Add New Resident</button>
                                </div>
                            </div>
                        </form>
                        <% }) %>
                </div>
            </div>
        </div>
    </div>



</body>

</html>